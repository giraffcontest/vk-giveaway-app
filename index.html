<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mini App</title>
    <script>
        // ОБЯЗАТЕЛЬНО: инициализация ДО загрузки страницы
        window.addEventListener('message', function(e) {
            if (e.data && e.data.type === 'VKWebAppInit') {
                e.source.postMessage({
                    type: 'VKWebAppInitResult',
                    data: { result: true }
                }, e.origin);
            }
        });
    </script>
</head>
<body>
    <h1>✅ Работает!</h1>
    <script>
        // Дополнительная инициализация после загрузки
        window.addEventListener('load', function() {
            console.log('Страница загружена');
        });
    </script>
</body>
</html>